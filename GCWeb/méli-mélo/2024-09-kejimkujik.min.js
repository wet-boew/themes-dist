/*!
 * @title Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * @license wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v14.3.0 - 2024-01-09
 *
 */
!function(s,e,i,d){"use strict";var o,u="campaign-menu",p="."+u+".gcweb-menu",t=d.doc;s(e).on("resize",function(){"A"==i.activeElement.nodeName&&(o=i.activeElement)}),t.on(d.resizeEvents,function(){if(null!=o){let e=function(e){let t=e.parentElement;for(;"NAV"!=t.nodeName&&"BODY"!=t.nodeName;)t=t.parentElement;return"NAV"==t.nodeName&&t}(o);if(e){let n=o.getAttribute("href");if(e.classList.contains("wb-menu")&&s(".wb-menu").is(":hidden")){for(var t=s(".gcweb-menu a[aria-expanded=true]"),a=0;a<t.length;a++)s(t).eq(a).attr("aria-expanded","false");if(s(p).find("button").attr("aria-expanded","true"),n.match("^#")){var i=n.substring(6);s(".gcweb-menu a[aria-controls='sub-menu-"+i+"']").focus()}else{let e=s('.gcweb-menu a[href="'+n+'"]'),t=s(e).parents("ul");if(1<t.length){let e=t.eq(0);e.parent().children("a.item").attr("aria-expanded","true")}e.focus()}}else if(e.classList.contains("gcweb-menu")&&s(".gcweb-menu").is(":hidden"))if(s(".wb-menu li").removeClass("active sm-open"),s(".wb-menu ul.open").attr("aria-expanded","false"),s(".wb-menu ul.open").attr("aria-hidden","true"),s(".wb-menu ul").removeClass("open"),n.match("^#")){let e=s(o).attr("aria-controls");i=e.substring(9);s(".wb-menu a[href='#menu-"+i+"']").focus()}else{let e=s('.wb-menu a[href="'+n+'"]'),t=s(e).parents("ul");if(1<t.length){let e=t.eq(0);e.attr("aria-expanded","true"),e.attr("aria-hidden","false"),e.addClass("open"),e.parent().addClass("active sm-open")}e.focus()}}}}),t.on("timerpoke.wb wb-init.campaign-menu.gcweb-menu",p,function(e){var t=d.init(e,u,p);if(t){for(var n=(e=s(t)).find("ul ul"),a=1;a<n.length+1;a++)n.eq(a-1).attr("id","sub-menu-"+a);if(1<i.querySelectorAll(".gcweb-menu").length)return console.warn(u+" - gcweb menu already exsits on the page, hiding gcweb campaign menu and aborting"),e.addClass("hidden"),void d.ready(e,u);t=i.querySelector("#wb-sm");if(null!=t||null!=t)return console.warn(u+" - megamenu already exsits on the page, aborting"),e.addClass("hidden"),void d.ready(e,u);var o=e.find("> ul > li"),r="",c=0,l=0;s.each(o,function(e,t){c++;var n=t.querySelector("a");n.setAttribute("class","item");var a,i,t=t.querySelectorAll("li");0<t.length?(i="menu-"+ ++l,a="",r+=`
                        <li><a href="#${i}" class="item" tabindex="0" aria-posinset="${c}" aria-setsize="${o.length}" role="menuitem" aria-haspopup="true">${n.textContent}</a>`,s.each(t,function(e,t){var n=t.querySelector("a"),t=n.getAttribute("href");a+=`<li><a href="${t}">${n.textContent}</a></li>`}),r+=`<ul class="sm list-unstyled" id="${i}" role="menu">${a}</ul></li>`):(i=n.getAttribute("href"),r+=`<li><a href="${i}">${n.textContent}</a></li>`)});r=`
                <nav id="wb-sm" class="campaign-menu wb-menu visible-md visible-lg">
                    <div class="pnl-strt nvbar">
                        <h2>${i.querySelector(p+" > h2").textContent}</h2>
                        <ul role="menubar" class="list-inline menu">
                            ${r}
                        </ul>
                    </div>
                </nav>`;e.addClass("visible-sm visible-xs"),e.after(r),s(".wb-menu").attr("data-trgt","mb-pnl"),s(".wb-menu").after('<div id="mb-pnl" hidden></div>'),s(".wb-menu").after('<div id="wb-glb-mn" hidden><h2> </h2></div>'),s(".wb-menu").trigger("wb-init.wb-menu"),s("#mb-pnl").remove(),s("#wb-glb-mn").remove(),s(".wb-menu").removeAttr("data-trgt"),d.ready(e,u)}}),d.add(p)}(jQuery,window,document,wb),function(n,a,i){"use strict";var o="collection-sort",r="."+o,c=i.doc,l={};c.on("collection-sort",r,function(e,t){var n=e.currentTarget;function a(){n.querySelectorAll(t.section).forEach(function(e){e=e.querySelectorAll(t.selector);let n=[],a=[];e.forEach(function(e){a.push(e.parentElement);e={elm:e,sortVal:""};n.push(e)}),t.sort.forEach(function(t){n.forEach(function(e){e.sortVal=e.elm.querySelector(t.selector).innerHTML}),"numeric"===t.type?"desc"===t.order?n.sort((e,t)=>t.sortVal-e.sortVal):n.sort((e,t)=>e.sortVal-t.sortVal):"desc"===t.order?n.sort((e,t)=>t.sortVal.localeCompare(e.sortVal)):n.sort((e,t)=>e.sortVal.localeCompare(t.sortVal))}),n.forEach(function(e,t){a[t].append(e.elm)})})}t.section&&t.selector&&t.sort&&(a(),c.on("wb-contentupdated",r,function(e,t){a()}))}),c.on("timerpoke.wb wb-init.collection-sort",r,function(e){var t=i.init(e,o,r);t&&(e=n(t),t=n.extend(!0,{},l,a[o],i.getData(e,o)),e.trigger("collection-sort",t),i.ready(e,o))}),i.add(r)}(jQuery,window,wb),function(o,n,p){"use strict";var r="distance-calculator",a="."+r,e=p.doc,i={};e.on("distance-calculator",a,function(e,d){var a=e.currentTarget,i=o(a);function u(e){return e*(Math.PI/180)}i.find(d.form).on("submit",function(e){var t=e.currentTarget.querySelector(d.location).value,e=encodeURIComponent(t),n=a.querySelector(d.section).querySelectorAll(d.selector),t="fr"===p.lang?"https://geogratis.gc.ca/services/geolocation/fr/locate?q=":"https://geogratis.gc.ca/services/geolocation/en/locate?q=";return o.getJSON(t+e,function(e){if(0==e.length)console.log("Empty response from geogratis");else{var l=e[0].geometry.coordinates[0],s=e[0].geometry.coordinates[1],t=e[0].title;if(n.forEach(function(e){let t=e.querySelector(d.target),n=e.querySelector(d.sort);var a,i,o,r,c;void 0!==t&&null!==t&&void 0!==n&&null!==n&&void 0!==t.dataset.distanceCoordinates&&null!==t.dataset.distanceCoordinates&&(i=(r=JSON.parse(t.dataset.distanceCoordinates)).longtitude,c=r.latitude,a="fr"===p.lang?" ":",",o=l,e=i,c=u((r=c)-(i=s)),o=u(e-o),o=Math.sin(c/2)*Math.sin(c/2)+Math.cos(u(i))*Math.cos(u(r))*Math.sin(o/2)*Math.sin(o/2),o=6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))),n.innerHTML=Math.round(o),t.innerHTML=function(e,t){for(var n=(e=(e+="").split("."))[0],e=1<e.length?"."+e[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1"+t+"$2");return n+e}(Math.round(o),a))}),void 0!==d.name&&null!==d.name){let e=a.querySelectorAll(d.name);e.forEach(function(e){e.innerHTML=t})}if("object"==typeof d.display&&void 0!==d.display.selector&&void 0!==d.display.removeClass&&null!==d.display.selector&&null!==d.display.removeClass){let e=a.querySelectorAll(d.display.selector);e.forEach(function(e){e.classList.remove(d.display.removeClass)})}i.trigger("wb-contentupdated",[{source:r}])}}),!1})}),e.on("timerpoke.wb wb-init.distance-calculator",a,function(e){var t=p.init(e,r,a);t&&(e=o(t),t=o.extend(!0,{},i,n[r],p.getData(e,r)),e.trigger("distance-calculator",t),p.ready(e,r))}),p.add(a)}(jQuery,window,wb),function(f,i,y){"use strict";function h(e){return"inline"===(e.currentStyle||i.getComputedStyle(e,"")).display.substr(0,6).toLowerCase()}function v(e){return"TEXTAREA"===e.tagName||"INPUT"===e.tagName&&!0===["text","search","url","tel","password"].includes(e.type)}function a(e,t){e.innerHTML!==t&&(e.innerHTML=t)}function o(e,t,n){("resetBtn"in t==!1||"resetBtn"in t==!1&&void 0!==n&&n!==e)&&(f(e).removeAttr("class"),f(e).addClass(e.copyBtnStyle),f(e).html(e.copyBtn),f(e).parent().attr("aria-live","off"))}function r(n){f("."+d).each(function(){var e,t=y.getData(f(this),"wb-clipboard");void 0!==n&&n.id===t.copyAreaId?(f(e=this).parent().attr("aria-live","polite"),e.copyCompleteBtn?f(e).html(e.copyCompleteBtn):f(e).html("<span class='glyphicon glyphicon-ok mrgn-rght-sm'></span>"+y.escapeAttribute(m.i18n.copyCompleteBtnTxt)),f(e).removeAttr("class"),f(e).addClass(e.copyBtnSize),e.copyCompleteBtnStyle?f(e).addClass(e.copyCompleteBtnStyle):f(e).addClass(m.copiedBtnStyle)):o(this,t)})}function c(e){var t,n;t=e,f(".wb-clipboard").each(function(){void 0!==t&&t===this?!0===t.addcopiedSectionStyle&&f(t).addClass(u):f(this).removeClass(u)}),n=e,f("."+x).each(function(){void 0!==n&&n.id===this.copyAreaId?a(this,this.copiedTxt):a(this,this.clipTxt)}),r(e)}function t(e){var t,n;!0!==f(e).hasClass("wb-clipboard")||!0!=(t=e,n=i.getSelection().toString(),t=document.getElementById(t.copySegmentId),(t=!0===v(t)?t.value:t.textContent).trim()===n.trim())&&!0!==p||(c(e),p=!1)}function w(e){e.focus(),!0===v(e)?e.select():i.getSelection().selectAllChildren(e)}async function n(e){if(!0===await async function(e){var t,e=document.getElementById(e.copySegmentId);if(w(e),p=!0,document.execCommand("Copy"))return!0;if(!0===await navigator.permissions.query({name:"clipboard-write"}).then(function(e){return"granted"==e.state||"prompt"==e.state})){e=new Blob([e.innerHTML],{type:"text/html"});try{return t=new ClipboardItem({[e.type]:e}),navigator.clipboard.write([t]),!0}catch(e){return!1}}return!1}(document.getElementById(e)))return i.getSelection(),!0}var l="wb-clipboard",s="."+l,S=l+"-config",e=y.doc,x=l+"-shell",d=l+"-btn",u="copied",C="btn-xs wb-clipboard-btn-inline",p=!1,A=!0,m={i18n:{en:{clipStart:"Start of clipboard text",clipEnd:"End of clipboard text",copiedStart:"Start of copied text",copiedEnd:"End of copied text",copyBtnTxt:"Copy",copyCompleteBtnTxt:"Copied"},fr:{clipStart:"D&eacute;but du texte du presse-papiers",clipEnd:"Fin du texte du presse-papiers",copiedStart:"D&eacute;but du texte copi&eacute;",copiedEnd:"Fin du texte copi&eacute;",copyBtnTxt:"Copier",copyCompleteBtnTxt:"Copi&eacute;"}},btnAlign:"none",copyBtnStyle:"mrgn-tp-sm btn-default "+d,copiedBtnStyle:"mrgn-tp-sm "+d+" btn-success"},B=function(e,t){e.copyBtn=e.innerHTML,e.copyBtnStyle=e.getAttribute("class"),"SPAN"===e.parentNode.tagName?e.copyBtnSize=C:e.copyBtnSize="btn",t.copiedBtnStyle&&(e.copyCompleteBtnStyle=t.copiedBtnStyle),t.copiedBtn&&(e.copyCompleteBtn=t.copiedBtn),f(e).trigger("click vclick touchstart")};e.on("wb-clipboard",s,function(e,t){var n,a=e.currentTarget,i=f(a),o=i.data(S).i18n,r=y.getId(),c=o.clipStart,l=o.copiedStart,s=y.getId(),d=y.getId(),u=o.clipEnd,p=o.copiedEnd,m="div",g="",b="",e="btn";if(a.hasAttribute("id")||(a.id=y.getId()),"resetFocusOut"in t==!0&&!0===t.resetFocusOut&&(A=!0),"PRE"===a.tagName||"border"in t!=!1&&!0!==t.border?a.addcopiedSectionStyle=!1:(!0===h(a)?i.addClass("copyarea-inline"):i.addClass("copyarea wb-clipboard-init"),a.addcopiedSectionStyle=!0),!0===v(a)?a.copySegmentId=a.id:(i.wrapInner('<span id="'+s+'"></span>'),a.copySegmentId=s,"noTextStyle"in t!=!1&&!1!==t.noTextStyle||f("#"+s).addClass("wb-clipboard-text"),t.clipStartText&&(c=t.clipStartText),t.copiedStartText&&(l=t.copiedStartText),i.prepend('<span id="'+r+'" class="wb-inv '+x+'">'+y.escapeAttribute(c)+"</span>"),document.getElementById(r).copyAreaId=a.id,document.getElementById(r).clipTxt=y.escapeAttribute(u),document.getElementById(r).copiedTxt=y.escapeAttribute(l),t.clipEndText&&(u=t.clipEndText),t.copiedEndText&&(p=t.copiedEndText),i.append('<span id="'+d+'" class="wb-inv '+x+'">'+y.escapeAttribute(u)+"</span>"),document.getElementById(d).copyAreaId=a.id,document.getElementById(d).clipTxt=y.escapeAttribute(u),document.getElementById(d).copiedTxt=y.escapeAttribute(p)),"noButton"in t==!1){switch(p=y.getId(),t.btnAlign){case"left":n="text-left ";break;case"right":n="text-right ";break;case"center":n="text-center ";break;case"none":default:n=""}!0===h(a)&&(m="span",g=" mrgn-lft-md",b=' class="'+(e=C)+'"'),m="<"+m+' class="'+n+g+'"/><button'+b+' type="button" aria-live="polite" id="'+p+'" data-wb-clipboard=\'{"copyAreaId": "'+a.id+"\"}'></button></"+m+">",!0===v(a)?i.after(m):i.append(m),f("#"+p).addClass(t.copyBtnStyle+" "+e),o=t.copyBtn||"<span class='glyphicon glyphicon-copy mrgn-rght-sm'></span>"+y.escapeAttribute(o.copyBtnTxt),f("#"+p).html(o),B(document.getElementById(p),t)}("selectAllContent"in t==!0&&!0===t.selectAllContent||"selectAllContent"in t==!1&&"noButton"in t==!0)&&f("#"+s).on("click vclick touchstart",function(){w(document.getElementById(s))})}),f("body").on("copy","*",function(e){t(e.currentTarget)}),e.on("focus",s+"[contenteditable]",function(){const e=f(this);e.data("before",e.html())}).on("blur keyup paste input",s+"[contenteditable]",function(){const e=f(this);e.data("before")!==e.html()&&(e.data("before",e.html()),e.trigger("change"))}),e.on("change",s,function(e){t(e.currentTarget)}),e.on("click","."+d,async function(e){var t=y.getData(f(e.currentTarget),"wb-clipboard");t.resetBtn?f(e.currentTarget).trigger("reset"+s):t.copyAreaId&&!0===await n(t.copyAreaId)&&!0===A&&f(":focus").one("focusout",function(e){e.stopPropagation(),document.getSelection().removeAllRanges(),c()})}),e.on("reset"+s,function(t){f("."+d).each(function(){var e=y.getData(f(this),"wb-clipboard");o(this,e,t.target)}),f("."+x).each(function(){a(this,this.clipTxt)}),f(".wb-clipboard").each(function(){f(this).removeClass(u)}),document.getSelection().removeAllRanges()}),e.on("timerpoke.wb wb-init.wb-clipboard",s,function(e){var t,n,a=y.init(e,l,s);a&&(t=f(a),n=a.id,m.i18n[y.lang]&&(m.i18n=m.i18n[y.lang]),(e=y.getData(t,l))&&e.i18n&&(e.i18n=f.extend({},m.i18n,e.i18n)),(a=f.extend({},m,e)).defaultIfNone&&!f.isArray(a.defaultIfNone)&&(a.defaultIfNone=[a.defaultIfNone]),e=f.extend(!0,{},m,i[l],y.getData(t,l)),t.data(S,a),f("."+d).each(function(){var e=y.getData(f(this),"wb-clipboard");void 0!==e.copyAreaId&&e.copyAreaId===n?B(this,y.getData(f("#"+e.copyAreaId),"wb-clipboard")):void 0!==e.resetBtn&&!0===e.resetBtn&&f(this).trigger("click vclick touchstart"),void 0!==e.resetFocusOut&&!0===e.resetFocusOut&&(A=!0)}),t.trigger("wb-clipboard",e),y.ready(t,l))}),y.add(s)}(jQuery,window,wb);