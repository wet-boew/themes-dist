/*!
 * @title Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * @license wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v14.4.0 - 2024-01-17
 *
 */
!function(i,e,o,n){"use strict";var r,a="campaign-menu",c="."+a+".gcweb-menu",t=n.doc,l=function(n){return function(e){var t=n.find("> ul > li"),a="";i.each(t,function(e,t){var n=t.querySelector("a"),t=n.getAttribute("href"),n=n.textContent;a+=`<li><a href="${t}">${n}</a></li>`});t=o.querySelector(c+" > h2"),a=`
                <nav id="wb-sm" class="campaign-menu wb-menu visible-md visible-lg" data-trgt="mb-pnl" data-ajax-replace="${n[0].getAttribute("data-megamenu-ajax")}">
                    <div class="pnl-strt nvbar">
                        <h2>${t.textContent}</h2>
                        <ul role="menubar" class="list-inline menu">
                            ${a}
                        </ul>
                    </div>
                </nav>`;n.addClass("visible-sm visible-xs"),i(".gcweb-menu").after('<div id="mb-pnl" hidden></div>'),i(".gcweb-menu").after('<div id="wb-glb-mn" hidden><h2> </h2></div>'),n.after(a),i(".wb-menu").trigger("wb-init.wb-menu"),i(o).on("wb-ready.wb-menu",s)}},s=function(){i("#mb-pnl").remove(),i("#wb-glb-mn").remove()},d=function(e){let t=e.parentElement;for(;"NAV"!=t.nodeName&&"BODY"!=t.nodeName;)t=t.parentElement;return"NAV"==t.nodeName&&t};i(e).on("resize",function(){"A"==o.activeElement.nodeName&&(r=o.activeElement)}),t.on(n.resizeEvents,function(){if(null!=r){let e=d(r);if(e){let n=r.getAttribute("href");if(e.classList.contains("wb-menu")&&i(".wb-menu").is(":hidden")){for(var t=i(".gcweb-menu a[aria-expanded=true]"),a=0;a<t.length;a++)i(t).eq(a).attr("aria-expanded","false");if(i(c).find("button").attr("aria-expanded","true"),n.match("^#")){var o=n.substring(14);let e=i(".gcweb-menu a[aria-controls='gc-sub-menu-"+o+"']");null!=e?(e.focus(),e[0].hasAttribute("aria-haspopup")&&"true"==e[0].getAttribute("aria-haspopup")&&e.attr("aria-expanded","true")):console.warn("Unable to find equivalent link in GCWeb menu top level items")}else{let e=i('.gcweb-menu a[href="'+n+'"]'),t=i(e).parents("ul");if(1<t.length){let e=t.eq(0);e.parent().children("a").attr("aria-expanded","true")}null!=e?e.focus():console.warn("Unable to find equivalent link in GCWeb menu submenu items")}}else if(e.classList.contains("gcweb-menu")&&i(".gcweb-menu").is(":hidden"))if(i(".wb-menu li").removeClass("active sm-open"),i(".wb-menu ul.open").attr("aria-expanded","false"),i(".wb-menu ul.open").attr("aria-hidden","true"),i(".wb-menu ul").removeClass("open"),n.match("^#")){let e=i(r).attr("aria-controls");o=e.substring(12);let t=i(".wb-menu a[href='#wet-sub-menu-"+o+"']");null!=t?t.focus():console.warn("Unable to find equivalent link in WET megamenu top level items")}else{let e=i('.wb-menu a[href="'+n+'"]'),t=i(e).parents("ul");if(1<t.length){let e=t.eq(0);e.attr("aria-expanded","true"),e.attr("aria-hidden","false"),e.addClass("open"),e.parent().addClass("active sm-open")}null!=e?e.focus():console.warn("Unable to find equivalent link in WET megamenu submenu items")}}}}),t.on("timerpoke.wb wb-init.campaign-menu.gcweb-menu",c,function(e){var t=n.init(e,a,c);if(t){e=i(t);if(1<o.querySelectorAll(".gcweb-menu").length)return console.warn(a+" - gcweb menu already exsits on the page, hiding gcweb campaign menu and aborting"),e.addClass("hidden"),void n.ready(e,a);t=o.querySelector("#wb-sm");if(null!=t||null!=t)return console.warn(a+" - megamenu already exsits on the page, aborting"),e.addClass("hidden"),void n.ready(e,a);i(o).on("wb-ready.wb",l(e)),n.ready(e,a)}}),n.add(c)}(jQuery,window,document,wb),function(n,a,o){"use strict";var i="collection-sort",r="."+i,c=o.doc,l={};c.on("collection-sort",r,function(e,t){var n=e.currentTarget;function a(){n.querySelectorAll(t.section).forEach(function(e){e=e.querySelectorAll(t.selector);let n=[],a=[];e.forEach(function(e){a.push(e.parentElement);e={elm:e,sortVal:""};n.push(e)}),t.sort.forEach(function(t){n.forEach(function(e){e.sortVal=e.elm.querySelector(t.selector).innerHTML}),"numeric"===t.type?"desc"===t.order?n.sort((e,t)=>t.sortVal-e.sortVal):n.sort((e,t)=>e.sortVal-t.sortVal):"desc"===t.order?n.sort((e,t)=>t.sortVal.localeCompare(e.sortVal)):n.sort((e,t)=>e.sortVal.localeCompare(t.sortVal))}),n.forEach(function(e,t){a[t].append(e.elm)})})}t.section&&t.selector&&t.sort&&(a(),c.on("wb-contentupdated",r,function(e,t){a()}))}),c.on("timerpoke.wb wb-init.collection-sort",r,function(e){var t=o.init(e,i,r);t&&(e=n(t),t=n.extend(!0,{},l,a[i],o.getData(e,i)),e.trigger("collection-sort",t),o.ready(e,i))}),o.add(r)}(jQuery,window,wb),function(i,n,p){"use strict";var r="distance-calculator",a="."+r,e=p.doc,o={};e.on("distance-calculator",a,function(e,d){var a=e.currentTarget,o=i(a);function u(e){return e*(Math.PI/180)}o.find(d.form).on("submit",function(e){var t=e.currentTarget.querySelector(d.location).value,e=encodeURIComponent(t),n=a.querySelector(d.section).querySelectorAll(d.selector),t="fr"===p.lang?"https://geogratis.gc.ca/services/geolocation/fr/locate?q=":"https://geogratis.gc.ca/services/geolocation/en/locate?q=";return i.getJSON(t+e,function(e){if(0==e.length)console.log("Empty response from geogratis");else{var l=e[0].geometry.coordinates[0],s=e[0].geometry.coordinates[1],t=e[0].title;if(n.forEach(function(e){let t=e.querySelector(d.target),n=e.querySelector(d.sort);var a,o,i,r,c;void 0!==t&&null!==t&&void 0!==n&&null!==n&&void 0!==t.dataset.distanceCoordinates&&null!==t.dataset.distanceCoordinates&&(o=(r=JSON.parse(t.dataset.distanceCoordinates)).longtitude,c=r.latitude,a="fr"===p.lang?" ":",",i=l,e=o,c=u((r=c)-(o=s)),i=u(e-i),i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(u(o))*Math.cos(u(r))*Math.sin(i/2)*Math.sin(i/2),i=6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))),n.innerHTML=Math.round(i),t.innerHTML=function(e,t){for(var n=(e=(e+="").split("."))[0],e=1<e.length?"."+e[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1"+t+"$2");return n+e}(Math.round(i),a))}),void 0!==d.name&&null!==d.name){let e=a.querySelectorAll(d.name);e.forEach(function(e){e.innerHTML=t})}if("object"==typeof d.display&&void 0!==d.display.selector&&void 0!==d.display.removeClass&&null!==d.display.selector&&null!==d.display.removeClass){let e=a.querySelectorAll(d.display.selector);e.forEach(function(e){e.classList.remove(d.display.removeClass)})}o.trigger("wb-contentupdated",[{source:r}])}}),!1})}),e.on("timerpoke.wb wb-init.distance-calculator",a,function(e){var t=p.init(e,r,a);t&&(e=i(t),t=i.extend(!0,{},o,n[r],p.getData(e,r)),e.trigger("distance-calculator",t),p.ready(e,r))}),p.add(a)}(jQuery,window,wb),function(f,o,y){"use strict";function h(e){return"inline"===(e.currentStyle||o.getComputedStyle(e,"")).display.substr(0,6).toLowerCase()}function v(e){return"TEXTAREA"===e.tagName||"INPUT"===e.tagName&&!0===["text","search","url","tel","password"].includes(e.type)}function a(e,t){e.innerHTML!==t&&(e.innerHTML=t)}function i(e,t,n){("resetBtn"in t==!1||"resetBtn"in t==!1&&void 0!==n&&n!==e)&&(f(e).removeAttr("class"),f(e).addClass(e.copyBtnStyle),f(e).html(e.copyBtn),f(e).parent().attr("aria-live","off"))}function r(n){f("."+d).each(function(){var e,t=y.getData(f(this),"wb-clipboard");void 0!==n&&n.id===t.copyAreaId?(f(e=this).parent().attr("aria-live","polite"),e.copyCompleteBtn?f(e).html(e.copyCompleteBtn):f(e).html("<span class='glyphicon glyphicon-ok mrgn-rght-sm'></span>"+y.escapeAttribute(m.i18n.copyCompleteBtnTxt)),f(e).removeAttr("class"),f(e).addClass(e.copyBtnSize),e.copyCompleteBtnStyle?f(e).addClass(e.copyCompleteBtnStyle):f(e).addClass(m.copiedBtnStyle)):i(this,t)})}function c(e){var t,n;t=e,f(".wb-clipboard").each(function(){void 0!==t&&t===this?!0===t.addcopiedSectionStyle&&f(t).addClass(u):f(this).removeClass(u)}),n=e,f("."+x).each(function(){void 0!==n&&n.id===this.copyAreaId?a(this,this.copiedTxt):a(this,this.clipTxt)}),r(e)}function t(e){var t,n;!0!==f(e).hasClass("wb-clipboard")||!0!=(t=e,n=o.getSelection().toString(),t=document.getElementById(t.copySegmentId),(t=!0===v(t)?t.value:t.textContent).trim()===n.trim())&&!0!==p||(c(e),p=!1)}function w(e){e.focus(),!0===v(e)?e.select():o.getSelection().selectAllChildren(e)}async function n(e){if(!0===await async function(e){var t,e=document.getElementById(e.copySegmentId);if(w(e),p=!0,document.execCommand("Copy"))return!0;if(!0===await navigator.permissions.query({name:"clipboard-write"}).then(function(e){return"granted"==e.state||"prompt"==e.state})){e=new Blob([e.innerHTML],{type:"text/html"});try{return t=new ClipboardItem({[e.type]:e}),navigator.clipboard.write([t]),!0}catch(e){return!1}}return!1}(document.getElementById(e)))return o.getSelection(),!0}var l="wb-clipboard",s="."+l,S=l+"-config",e=y.doc,x=l+"-shell",d=l+"-btn",u="copied",C="btn-xs wb-clipboard-btn-inline",p=!1,A=!0,m={i18n:{en:{clipStart:"Start of clipboard text",clipEnd:"End of clipboard text",copiedStart:"Start of copied text",copiedEnd:"End of copied text",copyBtnTxt:"Copy",copyCompleteBtnTxt:"Copied"},fr:{clipStart:"D&eacute;but du texte du presse-papiers",clipEnd:"Fin du texte du presse-papiers",copiedStart:"D&eacute;but du texte copi&eacute;",copiedEnd:"Fin du texte copi&eacute;",copyBtnTxt:"Copier",copyCompleteBtnTxt:"Copi&eacute;"}},btnAlign:"none",copyBtnStyle:"mrgn-tp-sm btn-default "+d,copiedBtnStyle:"mrgn-tp-sm "+d+" btn-success"},B=function(e,t){e.copyBtn=e.innerHTML,e.copyBtnStyle=e.getAttribute("class"),"SPAN"===e.parentNode.tagName?e.copyBtnSize=C:e.copyBtnSize="btn",t.copiedBtnStyle&&(e.copyCompleteBtnStyle=t.copiedBtnStyle),t.copiedBtn&&(e.copyCompleteBtn=t.copiedBtn),f(e).trigger("click vclick touchstart")};e.on("wb-clipboard",s,function(e,t){var n,a=e.currentTarget,o=f(a),i=o.data(S).i18n,r=y.getId(),c=i.clipStart,l=i.copiedStart,s=y.getId(),d=y.getId(),u=i.clipEnd,p=i.copiedEnd,m="div",b="",g="",e="btn";if(a.hasAttribute("id")||(a.id=y.getId()),"resetFocusOut"in t==!0&&!0===t.resetFocusOut&&(A=!0),"PRE"===a.tagName||"border"in t!=!1&&!0!==t.border?a.addcopiedSectionStyle=!1:(!0===h(a)?o.addClass("copyarea-inline"):o.addClass("copyarea wb-clipboard-init"),a.addcopiedSectionStyle=!0),!0===v(a)?a.copySegmentId=a.id:(o.wrapInner('<span id="'+s+'"></span>'),a.copySegmentId=s,"noTextStyle"in t!=!1&&!1!==t.noTextStyle||f("#"+s).addClass("wb-clipboard-text"),t.clipStartText&&(c=t.clipStartText),t.copiedStartText&&(l=t.copiedStartText),o.prepend('<span id="'+r+'" class="wb-inv '+x+'">'+y.escapeAttribute(c)+"</span>"),document.getElementById(r).copyAreaId=a.id,document.getElementById(r).clipTxt=y.escapeAttribute(u),document.getElementById(r).copiedTxt=y.escapeAttribute(l),t.clipEndText&&(u=t.clipEndText),t.copiedEndText&&(p=t.copiedEndText),o.append('<span id="'+d+'" class="wb-inv '+x+'">'+y.escapeAttribute(u)+"</span>"),document.getElementById(d).copyAreaId=a.id,document.getElementById(d).clipTxt=y.escapeAttribute(u),document.getElementById(d).copiedTxt=y.escapeAttribute(p)),"noButton"in t==!1){switch(p=y.getId(),t.btnAlign){case"left":n="text-left ";break;case"right":n="text-right ";break;case"center":n="text-center ";break;case"none":default:n=""}!0===h(a)&&(m="span",b=" mrgn-lft-md",g=' class="'+(e=C)+'"'),m="<"+m+' class="'+n+b+'"/><button'+g+' type="button" aria-live="polite" id="'+p+'" data-wb-clipboard=\'{"copyAreaId": "'+a.id+"\"}'></button></"+m+">",!0===v(a)?o.after(m):o.append(m),f("#"+p).addClass(t.copyBtnStyle+" "+e),i=t.copyBtn||"<span class='glyphicon glyphicon-copy mrgn-rght-sm'></span>"+y.escapeAttribute(i.copyBtnTxt),f("#"+p).html(i),B(document.getElementById(p),t)}("selectAllContent"in t==!0&&!0===t.selectAllContent||"selectAllContent"in t==!1&&"noButton"in t==!0)&&f("#"+s).on("click vclick touchstart",function(){w(document.getElementById(s))})}),f("body").on("copy","*",function(e){t(e.currentTarget)}),e.on("focus",s+"[contenteditable]",function(){const e=f(this);e.data("before",e.html())}).on("blur keyup paste input",s+"[contenteditable]",function(){const e=f(this);e.data("before")!==e.html()&&(e.data("before",e.html()),e.trigger("change"))}),e.on("change",s,function(e){t(e.currentTarget)}),e.on("click","."+d,async function(e){var t=y.getData(f(e.currentTarget),"wb-clipboard");t.resetBtn?f(e.currentTarget).trigger("reset"+s):t.copyAreaId&&!0===await n(t.copyAreaId)&&!0===A&&f(":focus").one("focusout",function(e){e.stopPropagation(),document.getSelection().removeAllRanges(),c()})}),e.on("reset"+s,function(t){f("."+d).each(function(){var e=y.getData(f(this),"wb-clipboard");i(this,e,t.target)}),f("."+x).each(function(){a(this,this.clipTxt)}),f(".wb-clipboard").each(function(){f(this).removeClass(u)}),document.getSelection().removeAllRanges()}),e.on("timerpoke.wb wb-init.wb-clipboard",s,function(e){var t,n,a=y.init(e,l,s);a&&(t=f(a),n=a.id,m.i18n[y.lang]&&(m.i18n=m.i18n[y.lang]),(e=y.getData(t,l))&&e.i18n&&(e.i18n=f.extend({},m.i18n,e.i18n)),(a=f.extend({},m,e)).defaultIfNone&&!f.isArray(a.defaultIfNone)&&(a.defaultIfNone=[a.defaultIfNone]),e=f.extend(!0,{},m,o[l],y.getData(t,l)),t.data(S,a),f("."+d).each(function(){var e=y.getData(f(this),"wb-clipboard");void 0!==e.copyAreaId&&e.copyAreaId===n?B(this,y.getData(f("#"+e.copyAreaId),"wb-clipboard")):void 0!==e.resetBtn&&!0===e.resetBtn&&f(this).trigger("click vclick touchstart"),void 0!==e.resetFocusOut&&!0===e.resetFocusOut&&(A=!0)}),t.trigger("wb-clipboard",e),y.ready(t,l))}),y.add(s)}(jQuery,window,wb);